<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FARS</title>
    <!--<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>-->
    <script src="js/d3.js" type="text/javascript"></script>
    <script src="js/d3.parasets.js" type="text/javascript"></script>
    <script src="js/crossfilter.js" type="text/javascript"></script>
    <script src="js/melt.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/dc.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="js/Bootstrap_3.3.7.js"></script>
    <link href='css/Bootstrap_3.3.7.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="js/d3.parasets.css">
    <link href='css/dc.css' rel='stylesheet' type='text/css' media='screen'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
</head>
<style>
    path {
        stroke: #EEEEEE;
        stroke-width: 1;
    }
</style>


<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">FARS Data Visualization</a>
            </div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#"><span class="glyphicon glyphicon-user"></span> About</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Exit</a></li>
            </ul>
        </div>
    </nav>
    <div class='container' id='main-container' style="width: 100%">
        <div class='content'>
            <div class='remaining-graphs'>
                <div class='bubble-graph'>
                    <div class="col-sm-12" style="border-style: solid; border-width: 4px 5px 1px 5px;">
                        <div class='row-fluid col-sm-12'><span>&nbsp;</span></div>
                        <strong>Factor Selection: </strong>
                        <span class="dropdown">
                        <select id="multicheckbox" multiple="multiple">
                            <option value="CollisionType" selected>Collision Type</option>
                            <option value="WEATHER" selected> Weather</option>
                            <option value="Gender"> Gender </option>
                            <option value="BodyType"> Vehicle Body Type </option> 
                            <option value="SchoolBus">School Bus</option>
                            <option value="HIT_RUN">Hit&Run</option>
                            <option value="DrunkNDrive">Drunk Driver</option></select>
                        </span>
                        <!--<span>&nbsp;</span><span>&nbsp;</span>
                        <span>
                            <strong>Collision Type: </strong>
                            <span class="dropdown">
                            <select id="collision" multiple="multiple">
                                <option value="1" selected>Front</option>
                                <option value="2" >Rear</option>
                                <option value="3" selected>Angle</option>
                                <option value="4" >random</option></select>
                            </span>
                        </span>-->
                        <div class='row-fluid col-sm-12'><span>&nbsp;</span></div>
                        <div>
                            <div class='row-fluid col-sm-6' id='dc-parallel-graph'></div>
                            <div class='row-fluid col-sm-3' id='attr1prnt' style="display: none">
                                <div id='attr1Name'><b>abc</b></div>
                                <div id='attr1'></div>
                            </div>
                            <div class='row-fluid col-sm-3' id='attr2prnt' style="display: none">
                                <div id='attr2Name'><b>abc</b></div>
                                <div id='attr2'></div>
                            </div>
                            <div class='row-fluid col-sm-3' id='attr3prnt' style="display: none">
                                <div><span>&nbsp;</span></div>
                                <div id='attr3Name'><b>abc</b></div>
                                <div id='attr3'></div>
                            </div>
                            <div class='row-fluid col-sm-3' id='attr4prnt' style="display: none">
                                <div><span>&nbsp;</span></div>
                                <div id='attr4Name'><b>abc</b></div>
                                <div id='attr4'></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='col-sm-12' style="border-style: solid; border-width: 1px 5px 1px 5px;background-color:#EEEEEE">
                <!--<span style='font-size: 21px; text-align: center;'> &nbsp;&nbsp;</span>-->
                <div class="col-sm-5" style="margin-top:20px">
                    <form id="form1">
                        <input type="radio" id="incidents" value="no" checked>
                        <label for="incidents">Incidents</label>
                        <input type="radio" id="fatalities" value="yes">
                        <label for="fatalities">Fatalities</label>
                    </form>
                    <div class='' id='dc-map-chart' style="float:left"></div>
                </div>
                <div class="col-sm-5" style="margin-top:20px">
                    <label id="state-chart-label">Select a State to view county level map </label>
                    <div class='' id='dc-map-counties-alt-text' style="float:left"></div>
                    <div class='' id='dc-map-counties' style="float:left"></div>
                </div>
            </div>
            <div class="col-sm-12" style="border-style: solid; border-width: 1px 5px 2px 5px;">
                <div class='chart-graph col-sm-5' id='dc-line-graph'></div>
                <div class='chart-graph col-sm-2'>
                    <div>&nbsp;</div>
                    <div>&nbsp;</div>
                    <div class='row-fluid pie-graph col-sm-12' id='dc-yr-pie-graph'></div>
                    <div class='row-fluid pie-graph col-sm-6' id='dc-sts-pie-graph'></div>
                </div>
                <div class='chart-graph col-sm-5' id='dc-heat-map-tot'></div>
                <!--<div class='chart-graph col-sm-12' id='dc-heat-map-yearly'></div>-->
            </div>
        </div>
    </div>
    </div>
    <script src='js/viz_constants.js' type='text/javascript'></script>
    <script src='js/simple_vis.js' type='text/javascript'></script>
    <script type="text/javascript">
        $('#multicheckbox').multiselect();
        $('#collision').multiselect();
        $('.dropdown').on('hidden.bs.dropdown', function (event) {
            checkboxes = document.getElementById('multicheckbox');
            checkboxesChecked = [];
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].selected) {
                    checkboxesChecked.push(checkboxes[i].value);
                }
            }
            if (checkList.toString() !== checkboxesChecked.toString()) {
                $('#parallelSets').remove();
                drawFromCSV(checkboxesChecked, dataSet)
                checkList = checkboxesChecked;
                

                // for (var i = 0; i < 4; i++) {
                //     $('#attr' + (i+1)).children().remove();
                //     document.getElementById('#attr' + (i+1)+'prnt').setAttribute("style","display: none");
                // }

                for (var i = 0; i < checkboxesChecked.length; i++) {
                    generateRingChart('attr' + (i+1).toString(), checkboxesChecked[i])
                }
            }
            
            // colTypeCheck = document.getElementById('collision');
            // newColTypeCheckList = [];
            // if(colTypeCheck.length == 0){
            //     {}
            // }else{
            //     for (var i = 0; i < colTypeCheck.length; i++) {
            //         if (colTypeCheck[i].selected) {
            //             newColTypeCheckList.push(colTypeCheck[i].value);
            //         }
            //     }
            //     if(colTypeCheckList.toString() !== newColTypeCheckList.toString()){
            //         collisionDim = accident_facts.dimension(function (d) {
            //             return d.CollisionType;
            //         });
            //         console.log(newColTypeCheckList)
            //         print_filter("collisionDim")
            //         collisionDim.filter(function(d){
            //             return d in colTypeCheckList;
            //         })
            //         console.log("After filter")
            //         print_filter("collisionDim")
            //         $('#parallelSets').remove();
            //         dataSet = collisionDim.top(Infinity);
            //         drawFromCSV(checkList, dataSet);
            //         colTypeCheckList = newColTypeCheckList;
            //     }
            // }
        });
    </script>
</body>

</html>